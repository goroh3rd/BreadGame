read_me

このSoundフォルダは¿【まぐまぐろ】？が作成したテンプレート的なやつです
僕がBGMやSEを使いやすいように最適化してあります
内容を更新し、コルーチンをいくつか追加し、若干安全性と拡張性が向上しました
unity初心者が作ったものなので色々問題あるかもしれませんが一応動きはすると思います
自由に改変、使用してください
Canvasのサイズは1920×1080を想定しています
また、BGMのフェードアウトにDOTweenを使用しているため、
プロジェクト内にインポートされていない場合エラーが起きます
このフォルダを使用するのであればDOTweenをインポートするのをお忘れなく

参考：https://note.com/calm_otter351/n/need65fbb2810
ChatGPTやCopilotも活用しました

---以下各種概要説明---
使い方は説明の下に書くつもり

BGMSourceフォルダとSESourceフォルダ
	使用する音源はこのフォルダに入れておきましょう
	べつに強制ではないけど
	SoundManagerの子オブジェクトにちゃんと設定すればおｋ

VolumeControlフォルダ（音量調節関係はこちら）
	AudioMixer
		Unityに標準で入っている機能で手軽にサウンドにいろいろな効果をかけられるようです
		Masterの子としてBGMグループとSEグループが入っており、
		これらを利用してBGMとSEの音量を一括で管理しています

	VolumeCanvas（プレハブ）
		タイトル画面に設置すべき音量調節関係のUIをまとめています
		デフォルトではPanelを表示するためのボタンだけが有効になっており、
		ボタンをクリックするとパネルが表示され、ボタンは非表示になります
		パネル内にはスライダー2つと閉じる用のボタンがあり、
		音量調節をしてパネルを閉じることができます
		EventSystemは自分で用意してください

	VolumeSliderController.cs
		音量調節のスライダーを使うためのスクリプトです
		2つのスライダーにアタッチされていることを確認してください
		特にいじる必要はないはずです
		あ、でもPlayerPrefsとか使えば設定を保持できるようになるので
		余裕があったら追加してみてください

SoundManager（プレハブ）
	シングルトンにしてあるので、
	サウンドマネージャーは全部のシーンに置いておいて問題ないです
	SoundManager.csがアタッチされたオブジェクトの孫オブジェクトとして
	全てのBGMとSEをセットします
	既にセットされているものと同様に、
	
	空の子オブジェクトを作成、AudioSourceをアタッチ、
	AudioClipをセット、OutputにAudioMixerのBGMかSEの適切な方のグループをセットします
	
	ヒエラルキーウィンドウにおける順番は実際にスクリプトで使用するので
	把握しておいてください

SoundManager.cs
	BGMとSEに関するコルーチンを複数用意してあります
	自分で作成した他のスクリプトから適切に引数を渡しながらStartCoroutineすることで
	簡単にBGMを切り替えたり止めたりSEを鳴らしたりできるはずです
	「*」のついたものは引数として渡さなかった場合デフォルトの値が適応されます
	フェード時間は0秒以上で。（0秒だとフェードせず即座に動作する）
	PlayBGM : 
		引数はBGM番号、*フェードイン時間
		BGMをフェードインさせながら再生
	StopBGM :
		引数は*フェードアウト時間
		BGMをフェードアウトさせながら停止
	PauseBGM :
		引数は*フェードアウト時間
		BGMをフェードアウトさせながら一時停止
	ResumeBGM :
		引数は*フェードイン時間
		BGMをフェードインさせながら再開
	ChangeBGMVolume :
		引数は変更後の音量（0～1）と*フェード時間
		BGMをかけたまま音量を変更する
	ChangeBGM :
		引数は次にかけるBGMの番号、*フェードアウト時間、*待ち時間、*フェードイン時間
		BGMをフェードアウト、待機、フェードイン
	CrossFadeBGM :
		引数は次にかけるBGMの番号、フェード時間
		BGMをフェードアウトすると同時に別のBGMをフェードイン
	PlaySE :
		引数はSE番号と*音量
		鳴ります。

SoundDemoフォルダ
	SoundManager.csを実際に使っているシーンとスクリプトがあります
	ボタンを押すとそれに対応したコルーチンが呼ばれます
	SounDemoシーンには既にSoundManagerが配置されていますが、
	AudioClipが設定されていないため、そのままシーンを再生してボタンを押しても
	「設定がおかしいよ」と表示されるだけで何も起きません
	AudioClipをSoundManagerの孫に設定したうえで確認してみてください
	Canvas内にあるボタンのインスペクタからいろんなパラメータをいじれるようになっています
	コルーチンの挙動を確認してみましょう
	BGMが再生された状態でそのままPlayBGMをやるとBGMがダブってしまう場合があるので、
	StopBGMやってからPlayBGMをやるか、ChangeBGM、CrossFadeBGMを使いましょう
	
	
---使い方---
Soundフォルダをインポートする
DOTweenがインポートされていない場合エラーが出るのでインポートする
SoundManagerプレハブを全シーンに追加
BGMやSEを追加したい場合はプレハブモードでやろう
タイトルにVolumeControl内にあるVolumeCanvasプレハブを追加
サイズ感とかはご自由に
EventSystemがあるか確認、無ければ追加
SoundSample.csを見てなんとなく使い方を把握する（消去してもいいよ）
任意のスクリプトの任意のタイミングでコルーチンを呼び出す
引数は各種説明の方に記載済み

不明点があれば¿【まぐまぐろ】？に訊いて下さい
------

ご意見ご質問アドバイス等ございましたらお気軽にお声がけください
2025年3月30日
¿【まぐまぐろ】？